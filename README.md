# SonicStream

<p align="center">
  <strong>Precision Playback for Your Local Files.</strong>
  <br />
  A modern, high-fidelity music player designed for audiophiles who value privacy and control. Experience bit-perfect, zero-latency rendering of your offline collection with a sleek, futuristic interface, and optionally sync your library to the cloud for access anywhere.
</p>

## Features

-   **Hybrid Storage Model**:
    -   **Guest Mode**: Plays files directly from your browser in a sandboxed environment. Your data never leaves your device.
    -   **Account Mode**: Sign in to securely sync your library to the cloud (via Supabase) and access it from any device.
-   **High-Fidelity Audio Engine**: Built to preserve audio integrity. Natively decodes and plays high-resolution formats like **FLAC, WAV, and MP3** without re-compression.
-   **Automatic Metadata Extraction**: Utilizes `jsmediatags` to parse ID3 tags client-side, automatically organizing your library with title, artist, and embedded album art.
-   **Secure Cloud Sync**: Leverages Supabase for robust authentication, secure object storage for audio files, and a relational database for metadata.
-   **Modern & Responsive UI**: A fully responsive interface built with React and Tailwind CSS provides a seamless experience on both desktop and mobile viewports.
-   **Zero-Latency Playback**: An optimized buffering engine ensures instant response times, whether loading a local file or streaming a synced track.

## Tech Stack

-   **Frontend**: React, Vite, TypeScript, Tailwind CSS
-   **Backend**: Supabase (Authentication, Database, Storage)
-   **Libraries**: Lucide React (Icons), jsmediatags (Metadata Parsing)

## Backend Setup (Supabase)

For full functionality (user accounts, cloud sync), you need to set up a free Supabase project.

1.  **Create a Supabase Project**: Go to [supabase.com](https://supabase.com) and create a new project.

2.  **Database Schema**: In the Supabase dashboard, navigate to the **SQL Editor** and run the following script to create the `tracks` table.

    ```sql
    -- Create the tracks table
    CREATE TABLE public.tracks (
      id bigint GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
      user_id uuid REFERENCES auth.users(id) ON DELETE CASCADE NOT NULL,
      title text NOT NULL,
      artist text,
      url text NOT NULL,
      duration numeric,
      created_at timestamp with time zone DEFAULT now() NOT NULL
    );

    -- Enable Row Level Security (RLS)
    ALTER TABLE public.tracks ENABLE ROW LEVEL SECURITY;
    ```

3.  **Row Level Security (RLS)**: Run these SQL commands to ensure users can only access their own music.

    ```sql
    -- Users can view their own tracks.
    CREATE POLICY "Enable read access for own user"
    ON public.tracks FOR SELECT
    USING (auth.uid() = user_id);

    -- Users can upload tracks for themselves.
    CREATE POLICY "Enable insert for own user"
    ON public.tracks FOR INSERT
    WITH CHECK (auth.uid() = user_id);
    ```

4.  **Storage**:
    -   In the Supabase dashboard, go to **Storage**.
    -   Create a new bucket named `audio`.
    -   Set the bucket to **Public**. *(Note: RLS on the `tracks` table still protects access to the URLs)*.
    -   Create the necessary Storage access policies in the SQL Editor:
        ```sql
        -- Users can view their own audio files.
        CREATE POLICY "Enable read access for own audio"
        ON storage.objects FOR SELECT
        USING (bucket_id = 'audio' AND auth.uid() = (storage.foldername(name))[1]::uuid);

        -- Users can upload their own audio files.
        CREATE POLICY "Enable insert access for own audio"
        ON storage.objects FOR INSERT
        WITH CHECK (bucket_id = 'audio' AND auth.uid() = (storage.foldername(name))[1]::uuid);
        ```

5.  **Environment Variables**:
    -   Navigate to **Project Settings > API**.
    -   Find your **Project URL** and `anon` **public** key.
    -   You will use these for local development.

## Local Development

**Prerequisites:** Node.js

1.  **Clone the repository:**
    ```bash
    git clone https://github.com/paritosh2681/sonic-stream.git
    cd sonic-stream
    ```

2.  **Install dependencies:**
    ```bash
    npm install
    ```

3.  **Set up environment variables:**
    -   Create a file named `.env` in the root of the project.
    -   Add your Supabase credentials from the previous step:
        ```
        VITE_SUPABASE_URL="YOUR_SUPABASE_PROJECT_URL"
        VITE_SUPABASE_ANON_KEY="YOUR_SUPABASE_ANON_PUBLIC_KEY"
        ```

4.  **Run the app:**
    ```bash
    npm run dev
    ```

The application will be available at `http://localhost:5173`.
